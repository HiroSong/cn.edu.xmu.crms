<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cn.edu.xmu.crms.dao.SeminarDao" >
    <resultMap id="SeminarMapper" type="cn.edu.xmu.crms.entity.Seminar">
        <id column="id" property="id" jdbcType="bigint"/>
        <result column="name" property="seminarName" jdbcType="varchar"/>
        <result column="sequence" property="seminarOrder" jdbcType="tinyint"/>
        <result column="description" property="seminarRequire" jdbcType="varchar"/>
        <result column="is_seen" property="seminarSeen" jdbcType="tinyint"/>
        <result column="team_limit" property="teamLimit" jdbcType="tinyint"/>
        <result column="seminar_state" property="seminarState" jdbcType="tinyint"/>
        <result column="regist_sequence" property="registOrder" jdbcType="tinyint"/>
    </resultMap>
    <!--<select id="方法名"  resultType="返回值类型" parameterType="参数类型">-->
    <!--SELECT * FROM user WHERE username = #{name}    sql语句，用#{}引用参数-->
    <!--</select>-->
    <select id="selectSeminarBySeminarId"  resultMap="SeminarMapper" parameterType="BigInteger">
        SELECT * FROM seminar WHERE seminar_id = #{seminarID}
    </select>
    <select id="selectSeminarBySeminarIdAndClassId"  resultMap="SeminarMapper" parameterType="BigInteger">
        SELECT * FROM seminar_class WHERE seminar_id = #{seminarID} AND class_id=#{classID}
    </select>

    <select id="selectRoundIdBySeminarId"  resultType="BigInteger" parameterType="BigInteger">
        SELECT round_id FROM seminar_round WHERE seminar_id = #{seminarID}
    </select>
    <select id="selectRoundOrderByRoundId"  resultType="int" parameterType="BigInteger">
        SELECT sequence FROM round WHERE id = #{roundID}
    </select>
    <select id="selectDeadLineIdBySeminarIdAndClassId" resultType="BigInteger" parameterMap="BigInteger">
        SELECT deadline_id FROM seminar_class WHERE seminar_id=#{seminarID} AND class_id=#{classID}
    </select>
    <select id="selectPresentationIdListBySeminarId"  resultType="BigInteger" parameterType="BigInteger">
        SELECT id FROM presentation WHERE seminar_id = #{seminarID}
    </select>
    <select id="selectPresentationIdListByTeamId"  resultType="BigInteger" parameterType="BigInteger">
        SELECT presentation_id FROM presentation_team WHERE team_id_id = #{teamID}
    </select>
    <select id="selectTeamIdBySeminarId"  resultType="BigInteger" parameterType="BigInteger">
        SELECT team_id FROM presentation WHERE seminar_id = #{seminarID}
    </select>

    <select id="selectDeadLineByDeadLineId" resultType="String" parameterMap="BigInteger">
        SELECT * FROM deadline WHERE id=#{DeadlineID}
    </select>

    <insert id="insertPresentation" parameterType="BigInteger" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO presentation(team_id,seminar_id,order,ppt_name,ppt,is_showing)
        VALUES (#{teamID},#{seminarID},#{order},,,1)
    </insert>
    <delete id="deletePresentation" parameterType="BigInteger">
        DELETE FROM presentation WHERE seminar_id=#{seminarID} AND team_id=#{teamID}
    </delete>
</mapper>
